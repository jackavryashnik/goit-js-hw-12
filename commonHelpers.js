import{S as v,a as L,i as m}from"./assets/vendor-cbff5fd8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();const S="/goit-js-hw-12/assets/bi_x-octagon-ddf7add7.svg",d=document.querySelector(".search-input"),q=document.querySelector(".search-form"),n=document.querySelector(".gallery");let u=1,w="";const i={key:"41300766-2a2685b0426849001fa971f21",q:"",image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:40},H={overlayOpacity:.8,captionsData:"alt",captionDelay:250};let h="https://pixabay.com/api/?";const M=new v(".gallery a",H),l=r=>{document.querySelector(r)&&document.querySelector(r).remove()},f=async(r,s)=>{await L.get(r).then(({data:o})=>{if(o.hits.length===0){m.error({message:"Sorry, there are no images matching your search query. Please try again!",backgroundColor:"#EF4040",messageColor:"#FAFAFB",position:"topRight",iconUrl:S,iconColor:"#ffffff",maxWidth:432,messageSize:16}),l(".loader"),l(".load-more-btn"),n.innerHTML="";return}const a=Math.ceil(o.totalHits/i.per_page);if(o.totalHits<=i.per_page||u===a){m.info({message:"We're sorry, but you've reached the end of search results.",position:"topRight",maxWidth:432,messageSize:16}),o.totalHits<=i.per_page&&p(o),l(".loader"),l(".load-more-btn");return}p(o),window.scrollBy({top:s,behavior:"smooth"})}).catch(o=>{l(".loader"),console.log(o)})};q.addEventListener("submit",r=>{r.preventDefault(),w!==d.value&&(n.innerHTML="",i.q=d.value),l(".loader"),l(".load-more-btn"),n.insertAdjacentHTML("afterend",'<span class="loader"></span>'),u=1;const s=h+new URLSearchParams(i)+`&page=${u}`;d.value="",f(s,0)});const p=r=>{let s=r.hits.map(({webformatURL:a,largeImageURL:e,tags:t,likes:c,views:g,comments:y,downloads:b})=>`<li class="gallery-item">
        <a class="gallery-link" href=${e}>
          <img class="gallery-image" src=${a} data-source=${e} alt="${t}" width="360" height="200"/>
          <ul class="image-stats">
            <li class="stats-item"><h3 class="stat-title">Likes</h3><p class="stat-value">${c}</p></li>
            <li class="stats-item"><h3 class="stat-title">Views</h3><p class="stat-value">${g}</p></li>
            <li class="stats-item"><h3 class="stat-title">Comments</h3><p class="stat-value">${y}</p></li>
            <li class="stats-item"><h3 class="stat-title">Downloads</h3><p class="stat-value">${b}</p></li>
          </ul>  
          </a>
        </li>`).join(""),o='<button type="submit" class="load-more-btn">Load more</button>';document.querySelector(".loader").remove(),n.insertAdjacentHTML("beforeend",s),n.insertAdjacentHTML("afterend",o),document.querySelector(".load-more-btn").addEventListener("click",a=>{a.preventDefault(),document.querySelector(".load-more-btn").remove(),n.insertAdjacentHTML("afterend",'<span class="loader"></span>'),u+=1;const e=h+new URLSearchParams(i)+`&page=${u}`,t=document.querySelector(".gallery-item").getBoundingClientRect().height*2;f(e,t)}),M.refresh()};
//# sourceMappingURL=commonHelpers.js.map
